<% if booknew.errors.any? %>
  <%= booknew.errors.count %>件のエラーが発生しました
  <ul>
    <% booknew.errors.full_messages.each do |message| %>
      <li><%= message %></li>
    <% end %>
  </ul>
<% end %>

<!-- ユーザープロフィール -->
<div>
  <h2>User info</h2>

  <% if request.path.include?("/books/") %>
    <% user_to_display = @book.user %>
  <% else %>
    <% user_to_display = @user %>
  <% end %>

  <%= image_tag user_to_display.get_profile_image(100, 100) %>
  <table class="table">
    <tbody>
      <tr>
        <th>name</th>
        <th class="bold-text"><%= user_to_display.name %></th>
      </tr>
      <tr>
        <th>introduction</th>
        <th class="bold-text"><%= user_to_display.introduction %></th>
      </tr>
    </tbody>
  </table>

  <div class="mt-3">
    <% if current_user == user_to_display %>
      <%= link_to edit_user_path(user_to_display), 
          class: "btn btn-outline-secondary px-4 py-2 custom-btn", 
          style: "width: 290px; height: 40px" do %>
        <i class="fa-solid fa-user-gear custom-icon"></i>
      <% end %>
    <% else %>
      <%= link_to user_path(current_user), 
          class: "btn btn-outline-secondary px-4 py-2 custom-btn", 
          style: "width: 290px; height: 40px" do %>
        <i class="fa-solid fa-user-gear custom-icon"></i>
      <% end %>
    <% end %>
  </div>

</div>

      
<!-- 投稿機能 -->

  <div class="mt-2"> 
    <h2>New book</h2>
  </div>
  
  <%= form_with model: booknew, url: books_path, method: :post do |f| %>
    <div class="mb-3">
      <label for="book_title" class="form-label">Title</label>
      <%= f.text_field :title, class: "form-control", id: "book_title" %>
    </div>
    <div class="mb-3">
      <label for="book_body" class="form-label">Opinion</label>
      <%= f.text_area :body, class: "form-control", id: "book_body" %>
    </div>
    <%= f.submit 'Create Book', class: "btn btn-success" %>
  <% end %>
</div>